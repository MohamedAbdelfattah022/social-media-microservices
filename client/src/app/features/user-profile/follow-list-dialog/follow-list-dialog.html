<div class="w-full">
  @if (isLoading()) {
    <div class="flex items-center justify-center py-10">
      <div
        class="h-7 w-7 animate-spin rounded-full border-4 border-gray-200 border-t-blue-600"
        role="status"
        aria-label="loading"
      ></div>
    </div>
  } @else if (error()) {
    <p class="py-6 text-center text-sm text-red-500">{{ error() }}</p>
  } @else if (users().length === 0) {
    <div class="flex flex-col items-center gap-2 py-10 text-gray-500">
      <z-icon zType="users" class="h-10 w-10 text-gray-300" />
      <p class="text-sm">No {{ type === 'followers' ? 'followers' : 'following' }} yet</p>
    </div>
  } @else {
    <ul class="divide-y divide-gray-100">
      @for (user of users(); track user.id) {
        <li
          (click)="navigateToProfile(user.id)"
          class="flex cursor-pointer items-center gap-4 px-1 py-3 transition-colors hover:bg-gray-50 rounded-lg"
        >
          <div
            class="h-11 w-11 shrink-0 overflow-hidden rounded-full bg-linear-to-br from-blue-500 to-blue-600 border border-gray-100"
          >
            @if (user.profilePictureUrl) {
              <img
                [src]="user.profilePictureUrl"
                [alt]="user.firstName + ' ' + user.lastName"
                class="h-full w-full object-cover"
              />
            } @else {
              <div
                class="flex h-full w-full items-center justify-center text-sm font-bold text-white"
              >
                {{ getInitials(user) }}
              </div>
            }
          </div>

          <div class="min-w-0 flex-1">
            <p class="truncate text-sm font-semibold text-gray-900">
              {{ user.firstName }} {{ user.lastName }}
            </p>
            @if (user.username) {
              <p class="truncate text-xs text-gray-500">@{{ user.username }}</p>
            }
            @if (user.bio) {
              <p class="truncate text-xs text-gray-400 mt-0.5">{{ user.bio }}</p>
            }
          </div>

          <z-icon zType="chevron-right" class="h-4 w-4 shrink-0 text-gray-400" />
        </li>
      }
    </ul>
  }
</div>
